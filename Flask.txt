
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
BASICS 					BASICS 					BASICS 					BASICS 					BASICS 					BASICS 					BASICS 	

<side note how to use>

flash('Text', 'danger/success')       #after flash you either redirect or render_template 
return render_template('file.html')   #templates/file.html 
return redirect(url_for('home'))      #home is the name of the function, def home(): template home.html 

</side note !how to use>
				
pip install flask

from flask import Flask, render_template, url_for, redirect, flash

app = Flask(__name__)
app.config['SECRET_KEY'] = 'random giberish'

@app.route('/home')                           # page/home.html  
@app.route('/')								  # page 
def home():
	return render_template('home.html', title='Home Page')       #you can add variables as arguments
																 #than you can access {{ title }} inside the template

if __name__ == '__main__':
    app.run(debug=True)
	
	
	
BASICTS 					BASICTS 					BASICTS 					BASICTS 					BASICTS 					BASICTS 					BASICTS 					
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
FORMS						FORMS						FORMS						FORMS						FORMS						FORMS						FORMS						

	
																 																		form.py
pip install flask-wtf
																																		
from flask_wtf import FlaskForm 
from wtforms import StringField, PasswordField, BooleanField, SubmitField
from wtforms.validators import DataRequired, Email, Length, EqualTo

class RegistrationForm(FlaskForm):
    username = StringField('Username', validators=[DataRequired(), Length(min=2,max=20)])
    email = StringField('Email', validators=[DataRequired(), Email()])
    password = PasswordField('Password', validators=[DataRequired()])
    confirm_password = PasswordField('Confirm Password', validators=[DataRequired(), EqualTo('password')])
    submit = SubmitField('Sign Up')

class LoginForm(FlaskForm):
    email = StringField('Email', validators=[DataRequired(), Email()])
    password = PasswordField('Password', validators=[DataRequired()])
    remember = BooleanField('Remember Me')
    submit = SubmitField('Login')
																																		main.py
																																		
from form import RegistrationForm, LoginForm

@app.route('/login', methods=['POST', 'GET'])
def login():
    form = LoginForm()
    if form.validate_on_submit():
        if form.email.data == 'a@a.com' and form.password.data == 'p':                                            #fake login
            flash('You have been logged in!', 'success')
            return redirect(url_for('home'))
        else: 
            flash('Login Unsuccessful. Please check username and password', 'danger')
    return render_template('login.html', title='Login', form=form)

@app.route('/register', methods=['POST', 'GET'])
def register():
    form = RegistrationForm()
    if form.validate_on_submit():
        flash(f'Account created for {form.username.data}!', 'success')
        return redirect(url_for('login'))
    return render_template('register.html', title='Register', form=form)


register.html
{% extends 'layout.html' %}
{% block content %}
	<div class='content-section'>
        <form method='POST' action=''>
		
            {{form.hidden_tag()}}                                                              #this is linked with the secret key
			
            <fieldset class='form-group'>
                <legend class='border-bottom mb-4'>Join Today</legend>
                <div class='form-group'>
                    {{form.username.label(class='form-control-label')}}

                    {% if form.username.errors %}                                         		#all 'usernames' can be changed to the class inputs
                        {{form.username(class='form-control form-control-lg is-invalid')}}		#for example, password, confirm_password or email
                        <div class='invalid-feedback'>
                            {% for error in form.username.errors %}
                                <span> {{error}} </span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{form.username(class='form-control form-control-lg')}}
                    {% endif %}
				
                </div>
			</fieldset>
			<div class='form-group'>
                {{form.submit(class='btn btn-outline-info')}}
            </div>
        </form>
    </div>
	<div class='border-top pt-3'>
        <small class='text-muted'>
            Already Have An Account? <a  class='ml-2' href='{{url_for("login")}}'>Sign In</a> 
        </small>
    </div>
{% endblock content %}
	


login.html
	
{% extends 'layout.html' %}
{% block content %}
    <div class='content-section'>
        <form method='post' action=''>
            {{form.hidden_tag()}}
            <fieldset class='form-group'>
                <legend class='border-bottom mb-4'>Login</legend>
                <div class='form-group'>
                    {{form.email.label(class='form-control-label')}}

                    {% if form.email.errors %}
                        {{form.email(class='form-control form-control-lg is-invalid')}}
                        <div class='invalid-feedback'>
                            {% for error in form.email.errors %}
                                <span> {{error}} </span>
                            {% endfor %}
                        </div>
                    {% else %}    
                        {{form.email(class='form-control form-control-lg')}}
                    {% endif %}
                </div>
				
                <small class='text-muted ml-2'>
                    <a href='#'>
                        Forgot Password?
                    </a>
                </small>
				
            </fieldset>
			<div class='form-group'>
                {{form.submit(class='btn btn-outline-info')}}
            </div>
        </form>
    </div>
    <div class='border-top pt-3'>
        <small class='text-muted'>
            Need An Account? <a  class='ml-2' href='{{url_for("register")}}'>Sign Up Now</a>
        </small>
    </div>
{% endblock content %}

																																		layout.html, before the block content
{% with messages = get_flashed_messages(with_categories=true) %}
	{% if messages %}
	  {% for category, message in messages %}
		<div class="alert alert-{{ category }}">
		  {{ message }}
		</div>
	  {% endfor %}
	{% endif %}
{% endwith %}
	

FORMS			FORMS			FORMS			FORMS			FORMS			FORMS			FORMS			FORMS			FORMS			FORMS			FORMS			FORMS				
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		
	
from flask_sqlalchemy import SQLAlchemy
pip install flask-sqlalchemy

app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///site.db'
db = SQLAlchemy(app)
	
	
class User(db.Model):
    id = db.Column(db.Integer, primary_key = True)
    username = db.Column(db.String(20), nullable=False, unique=True)
    email = db.Column(db.String(120), unique=True, nullable=False)
    image_file = db.Column(db.String(20), nullable=False, default='default.jpg')
    password = db.Column(db.String(60), nullable=False)
    posts = db.relationship('Post', backref='author', lazy=True)
	#this is not a column, Post is the actual class, backref is what we will call it

    def __repr__(self):
        return f"User('{self.username}'), ('{self.email}'), ('{self.image_file}')"

class Post(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), nullable=False)
    date_posted = db.Column(db.DateTime, nullable=False, default=datetime.utcnow)				#from datetime import datetime
    content = db.Column(db.Text, nullable=False)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)					#a foreign key needs the name of the table, lowercase
    
    def __repr__(self):
        return f"User('{self.title}'), ('{self.date_posted}')"

		
>>CONSOLE
from flaskblog import db 
db.create_all()          

from flaskblog import User, Post        	#the classes 
user_1 = User(username='John', email='JohnDoe@example.com', password='password')
user_2 = User(username='John2', email='JohnDoe2@example.com', password='password2')
db.session.add(user_1) 						#cannot add all as in git, now in staged area 
db.session.commit() 						#commited area,
User.query.all()							#return a list with all the 'users'
User.query.get(1) 							#1 is the id, the primary key
User.query.first()							#return only the first instance created
User.query.filter_by(username='John').all()	#return the list with all the filtered users 
user = User.query.filter_by(username='John').first()
print user                            		#prints the instance 

print user.posts  >> []						#user has no posts linked with it
print user.id 	  >> 1
post_1 = Post(title='Blog 1', content='First Post Content!', user_id=user.id)
post_2 = Post(title='Blog 2', content='Second Post Content!', user_id=user.id)
db.session.add(post_1)
db.session.add(post_2)
db.session.commit()
user.posts 		  >> #list with the posts that has: a title, dateposted like we specified in the __repr__ method 
post = Post.query.first()					#it has the first post created 
post.user_id  	  >>1 						#user_id has been linked as a foreign key 
post.author       >>User('John', 'JohnDoe@example', 'default.jpg')    author as a backref is the user, 
	
	
db.drop_all()								#deletes all THIS SHIT 
db.create_all()
User.query.all()  >> []
Post.query.all()  >> []


DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		DATABASE 		
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTUR		STRUCTUR		STRUCTUR		
	
	
To this point the structure of the files looked like this:
THIS IS A MODULE

 |-->static  		-->		main.css
 |	
 |-->templates -----|-->	home.html 							includes layout.html
 |					|
 |					|--> 	layout.html                        	includes main.css, bootstrap
 |					|
 |					|-->  	login.html 							includes layout.html 
 |					|
 |					|--> 	register.html 						includes layout.html 
 |					|
 |					 --> 	about.html 							includes layout.html
 |					
 |-->flaskblog.py 												includes  flask, render_template, url_for, flash, redirect, form.py, models.py, sqlalchemy.   creates app, initialises app, routes
 |
 |-->models.py													includes flaskblog #this is a circular import
 |
  -->form.py													includes wtforms										creates RegistrationForm, LoginForm
	

THIS IS A PACKAGE 
a package only has a file named __init__.py

|-->flaskblog ------|--> __init__.py							includes flask, sqlalchemy, from flaskblog import routes(import routs after db )    	   				creates app, db
|					|
|					|--> forms.py								includes wtforms
|					|
|					|--> models.py								includes flaskblog.db
|					|
|					|--> routes.py								includes render_template, url_for, flash, redirect, flaskblog.models.py, flaskblog.forms.py, app     	creates routes
|					|
|					|--> site.db
|					|
|					|
|					|--> static ----> main.css
|					|
|					 --> templates ---------------->	home.html 							includes layout.html
|											 	|
|												|--> 	layout.html                        	includes main.css, bootstrap
|												|
|												|-->  	login.html 							includes layout.html 
|												|
|												|--> 	register.html 						includes layout.html 
|												|
|												 --> 	about.html 							includes layout.html
|				
|
 -->run.py														from flaskblog import app(inside __init.py)                   									initialises app
	
	
	
	
	
	
	
	
	
	
STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		STRUCTURE		
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			
pip install flash-bcrypt
	
	
from flask_bcrypt import Bcrypt 
bcrypt = Bcrypt()
bcrypt.generate_password_hash('testing')
>> b'2938j*rj2098j389j)*j30*J)(J(#)3094043'												#the b in the begining means it is in bytes
hashed_pw = bcrypt.generate_password_hash('testing').decode('utf-8')
>> '2938j*rj2098j389j)*j30*J)(J(#)3094043'												# now its just a string
bcrypt.check_password_hash(hashed_pw, 'password')
>> False 
bcrypt.check_password_hash(hashed_pw, 'testing')
>> True 


HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			HASHING PASSWORDS			
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				
	
__init__.py
from flask_bcrypt import Bcrypt 
bcrypt = Bcrypt(app)
	
routes.py 
from flaskblog import app, db, bcrypt

def register()
	if form.validate_on_submit():
		hashed_password = bcrypt.generate_password_hash(form.password.data).decode('utf-8')
		user = User(username=form.username.data, email=form.email.data, password=hashed_password)
		db.session.add(user)
		db.session.commit()
		flash('Account created', 'success')
		return redirect(url_for('login'))
	return render_template('register.html', title='Register', form=form)
		
forms.py 
from flaskblog.models import User
from wtforms.validators import ValidationError

class RegistrationForm():
	....
	....
	
	#def validate_field(self, field):
	#	if True:
	#		raise ValidationError('Validation Message')
	# VALIDATION ERROR TEMPLATE
	
	def validate_username(self, username):
        user = User.query.filter_by(username=username.data).first()
        if user:
            raise ValidationError('That username is taken. Please choose a different one')
	#almost same for email

	
DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				DUPLICATE USERS				
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 	


				
pip install flask-login	
__init__.py 
from flask_login import LoginManager
login_manager = LoginManager(app)

models.py 
from flaskblog import db, login_manager 
from flask_login import UserMixin

class user(db.Model, UserMixin):            # beware if the UserMixin here!!!
	.......

@login_manager.user_loader
def load_user(user_id):
	return User.query.get(int(user_id))
	
routes.py 
from flask_login import login_user, current_user, logout_user

def login():
	if current_user.is_authenticated:
		return redirect(url_for('home'))
	form = LoginForm()
	if form.validate_on_submit():          #overwrite
		user = User.query.filter_by(email=form.email.data).first()
		if user and bcrypt.check_password_hash(user.password, form.password.data):
			login_user(user, remember=form.remember.data)
			return redirect(url_for('home'))
		else:
			flash('Login Unsuccessful..., 'danger')
	return render_template('login....', title='Login', form=form)
	
def register():
	if current_user.is_authenticated:
		return redirect(url_for('home'))
	form = ...
	....
	
USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					USER LOGIN 					
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					

@app.route('/logout')
def logout():
	logout_user()
	return redirect(url_for('home'))
	
	
layout.html
......
<div class='navbar-nav'>
	{% if current_user.is_authenticated %}
		<a href='{{url_for("logout") }}'> Log out </a>
	{% else %}
		<a href='{{url_for("login") }}'> Log In </a>
		<a href='{{url_for("register") }}'> Sign Up </a>
	{% endif %}
</div>

USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					USER LOGOUT					
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			

routes.py
....
@app.route('/account')
def account():
	return render_template('account.html', title='Account') 		#current_user.username inside the content block, create it

layout.html
......
<div class='navbar-nav'>
	{% if current_user.is_authenticated %}
		<a class="nav-item nav-link" href='{{url_for("logout") }}'> Log out </a>
		<a class="nav-item nav-link" href='{{url_for("account") }}'> Account </a>
......

routes.py
from flask_login import login_required 
.....

@app.route('/account')
@login_required 
def account():
	....

__init__.py
....
login_manager.login_view = 'login' #function name to where is beeing redirected
login_manager.login_message_category = 'info'

USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			USER ONLY PAGES 			
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					 

routes.py
from flask import ..., request 
....

def login():
	....
	if form.validate():
		...
		if user and bcrypt ....:
			login_user
			next_page = request.args.get('next')
			return redirect(next_page) if next_page else redirect(url_for('home'))		#beware of the new redirect link!!!!!
		
	
	
	
REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					REDIRECTING					
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				
	
account.html 

#snipets
#overwrite 
<img class='rounded-circle account-img' src='{{ image_file }}'>
	<h2 class='account-heading'>{{ current_user.username }}</h2>
	<h2 class='account-heading'>{{ current_user.email }}</h2>
	
??inside the static folder add a profile_pics folder(nested) that has default.png 
	
routes.py 
...

def account():
	image_file = url_for('static', filename='profile_pics/' + current_user.image_file)
	return render_template('account.html', image_file=image_file)  							#beware of image_file!!
	
	
	
ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				ACCOUNT PAGE 				
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		

forms.py 
from flask_login import current_user

class UpdateAccountForm(FlaskForm):
	username = ....#as usual
	email = .......#as usual	
	submit = ......#as usual   label=> update

	def validate_username(self, username):
        if username.data != current_user.username:
            user = User.query.filter_by(username=username.data).first()
            if user:
                raise ValidationError('That username is taken. Please choose a different one.')

    def validate_email(self, email):
        if email.data != current_user.email:
            user = User.query.filter_by(email=email.data).first()
            if user:
                raise ValidationError('That email is taken. Please choose a different one.') 
	
	
registration template, copy the form and add it to account.html,  
where it says from here, and modify, delete passwords, change legend
<div class='content-section'>
	#stuff
</div> 
<div class=''>
	Already have an account?
</div>
	
	

routes.py 
from flaskblog.forms import UpdateAccountForm 
....

@app.route('/account', methods=['Get', 'Post')
def account():
	form = UpdateAccountForm()
	if form.validate_on_submit():
		current_user.username = form.username.data 
		current_user.email = form.email.data 
		db.session.commit()
		flash('your account has been updated', 'success')
		return redirect(url_for('account'))
	elif request.method == 'GET':
		form.username.data = current_user.username 
		form.email.data = current_user.email
	imagefile = ....
	return render_template(...., form=form)  #beware of the form!!!

	
UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		UPDATING ACCOUNT PAGE 		
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE			
forms.py 
from flask_wtf.file import FileField, FileAllowed 

class Update...()
	....
	picture = FileField('Update Profile picture', validators=[FileAllowed(['jpg', 'png'])])

	
	
account.html 
....
<form method='Post' action='' enctype='multipart/form-data'>         #beware of the enctype!!!!
		<div class='form-group'>
			{{ form.picture.label() }}
			{{ form.picture(class="form-control-file") }}
			{% if form.picture.errors %}
				{% for error in form.picture.errors %}
					<span class='text-danger'> {{error }} </span></br>
				{% endfor %}
			{% endif %}
		</div>
	</fieldset>
</form>
	
	
routes.py #pip install Pillow
import secrets, os
from PIL import Image
... 

def save_picture(form_picture):
	random_hex = secrets.token_hex(8) #8 bytes 
	_, f_ext = os.path.splitext(form_picture.filename) #within python if you want to throw a name you use a ' _ '
	picture_fn = random_hex + f_ext
	picture_path = os.path.join(app.root_path, 'static/profile_pics', picture_fn)
	
	output_size = (125, 125)
	i = Image.open(form_picture)
	i.thumbnail(output_size)
	
	i.save(picture_path)
	
	return picture_fn
 
def account():
	if form.validate_on_submit():
		if form.picture.data:
			picture_file = save_picture(form.picture.data)
			current_user.image_file = picture_file
		
		....
	
	
	
	
	

UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		UPDATE PICTURE DATABASE		////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				



forms.py
from wtforms import TextAreaField 
...
class PostForm(FlaskForm):
	title = StringField('Title', validators=[DataRequired()])
	content = TextAreaField('Content', validators=[DataRequired()])
	submit = SubmitField('Post')

routes.py 
from flaskblog.forms import PostForm
....
@app.route('/posts/new', methods=['GET', 'POST'])
@login_required 
def new_post():
	form = PostForm()
	if form.validate_on_submit():
		flash('your post has been created!', 'success')
		return redirect(url_for('home')) 
	return render_template('create_post.html', title='New Post', form=form)
	
create_post.html 
{% extends 'layout.html' %}
{% block content %} #copy content section div from login to create_post, legend to new post, edit form.title.label and form.content.label, 
					#checkbox remember me not needed, delete the forgot password
	
{% endblock content

layout.html 
...
	<a class='nav-item nav-link' href='{{ url_for('new_post' }}> New Post </a>
	<a class='nav-item nav-link' href='{{ url_for('account' }}> Account </a>

routes.py 
....

def new_post():
	if form.validate_on_submit():
		post = Post(title= form.title.data, content=form.content.data, author=current_user)
		db.session.add(post)
		db.session.commit()
		....
		
def home():        #delete the posts dummy data 
	posts = Post.query.all()
	...
	
@app.route('/post/<int:post_id>')  #/post/1 is post_id 1 of type int
def post(post_id):
	post = Post.query.get_or_404(post_id)
	return render_template('post.html', title=post.title, post=post)

home.html 
...
<article>
	<img class='rounded-circe artice-img' src='url_for('static', filename='profile_pics/' + post.author.image_file) }}'>
	...
		<a class='mr-2' href='#'>{{ post.author.username }}</a>
		<small class='text-muted'> {{ post.date_posted.strftime('%Y-%m-%d') }}<small>
		
		<h2><a class='article-title'> href='{{ url_for('post', post_id=post.id) }}> {{post.title }}</a></h2>

	
posts.html 
#from home.html copy paste all
#no need for the 'for loop'
...
<h2 class='article-title'>{{post.title}}</h2>#removed the <a>, added the class
...
	
	
	



CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				CREATING POSTS				
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				
	
routes
from flask import abort
....
@app.route('/post/<int:post_id>/update', methods=['POST', 'GET')
@login_required
def update_post(post_id):
	post = Post.query.get_or_404(post_id)
	if post.author != current_user:
		abort(403)
	form = PostForm()
	if form.validate_on_submit():
		post.title = form.title.data 
		post.content = form.content.data 
		db.session.commit()
		flash('Your post has been updated!', 'success')
		return redirect(url_for('post', post_id=post.id))
	elif request.method == 'GET':
		form.title.data = post.title 
		form.content.data = post.content
	return render_template('create_post.html', title='Update Post', 
						form=form, legend='Update Post')
	
def new_post():
	...
	return render_template(....., legend='New Post')


create_post.py 
	..
	<legend>{{ legend }}</legend>
	
	
UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				UPDATE POSTS				
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				


post.html 
.... 
	<small>
	{% if post.author == current_user %}
		<a class='btn btn-secondary btn-sm mt-1 mb-1' href='{{url_for("update_post", post_id = post.id) }}'>Update</a>
		<button type='button' class='btn btn-danger btn-sm m-1'>Delete</button> #in here add data-toggle and data-target='#deleteModal'
	{% endif %}
	</div> 
	<h2> 
</article> 
		#in here coppy paste from bootstrap all the code from the model, change everywhere where exampleModal to deleteModal(3)
		#change the modal title, Delete Post?, delete the modal body, from save changes(delete it), add this 
		#<form action='{{url_for("delete_post", post_id=post.id)}}' method='post'>
		#<input class='btn btn-danger' type='submit' value='Delete'>

routes.py 
... 

@app.route('/post/<int:post_id>/delete', methods=['GET', 'POST']
@login_required
def delete_post(post_id):
	post = Post.query.get_or_404(post_id)
	if post.author != current_user:
		abort(403)
	db.session.delete(post)
	db.session.commit()
	flash('Your post has been deleted!', 'success')
	return redirect(url_for('home'))
	
	
DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				DELETE POSTS 				
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////